# AgentPsy 详细功能说明

## 1. 多模型支持

AgentPsy 支持多种大语言模型，包括本地模型和云模型：

### 1.1 本地模型
- **Ollama**：支持通过Ollama服务运行的本地模型，如`llama3`、`gemma3`等
- **配置**：通过`.env`文件配置本地模型的API地址和密钥

### 1.2 云模型
- **GLM系列**：包括`glm-4-plus`、`glm-4-air`等
- **DeepSeek**：支持`DeepSeek-V3`等模型
- **其他云服务**：支持Together、OpenRouter等平台的模型
- **配置**：通过`.env`文件配置各云服务的API密钥和模型ID

## 2. 多样化测评

AgentPsy 支持多种心理测评量表，每种量表都有对应的测试文件：

### 2.1 大五人格测试 (Big Five)
- **测试文件**：`agent-big-five-50-complete.json`
- **维度**：外向性(E)、宜人性(A)、尽责性(C)、神经质(N)、开放性(O)
- **题目数量**：50题
- **特点**：基于情境的完整版大五人格评估，包含详细的评分标准

### 2.2 抑郁焦虑压力量表 (DASS)
- **测试文件**：`agent-dass-42-complete.json`
- **维度**：抑郁、焦虑、压力
- **题目数量**：42题
- **特点**：完整版抑郁-焦虑-压力情境评估，包含详细的评分标准

### 2.3 动机测试
- **测试文件**：`agent-motivation-test.json`
- **评估内容**：内在动机和外在动机
- **维度**：成就动机、归属动机、权力动机、自主动机、能力动机、关联动机等
- **题目数量**：20题
- **特点**：基于自我决定理论、成就动机理论等心理学框架

### 2.4 图形映射测试
- **测试文件**：`agent-graph-mapping-35-complete.json`
- **维度**：抽象推理、模式识别、逻辑思维、问题解决
- **题目数量**：35题
- **特点**：流体推理评估，包含同构映射问题，难度从简单到专家级

### 2.5 公民身份测试
- **测试文件**：`agent-citizenship-test.json`
- **维度**：历史知识、地理知识、政治知识、文化知识
- **题目数量**：10题
- **特点**：国情知识测试，涵盖国家历史、地理、政治、文化等方面

### 2.6 客户服务测试
- **测试文件**：`Agent-Customer-Service-50.json`
- **维度**：沟通技巧、问题解决、同理心、专业性、情绪管理、情绪识别、冲突解决
- **题目数量**：50题
- **特点**：客服技能测试，涵盖各种客服场景

### 2.7 书呆子认知风格测试
- **测试文件**：`agent-npas-26-complete.json`
- **维度**：书呆子属性
- **题目数量**：26题
- **特点**：书呆子人格属性量表，评估对科学、技术、知识的偏好

### 2.8 自恋倾向测试
- **测试文件**：`Agent-NPI-40.json`
- **维度**：领导权威、优越傲慢、特权剥削、夸大展示
- **题目数量**：40题
- **特点**：自恋人格量表，评估自恋倾向的各个方面

### 2.9 其他测试
- **基金理财测试**：`agent-fund-management-test.json`
- **法律知识测试**：`agent-legal-knowledge-test.json`
- **政治立场测试**：`agent-political-stance-test.json`
- **NPAS简版测试**：`Agent-NPI-40.json`

## 3. 压力测试

AgentPsy 提供了多种压力测试功能，用于评估模型在不同压力下的表现：

### 3.1 情感压力
- **等级**：0-4级，从无压力到极限压力
- **实现**：通过在系统提示中添加压力提示语实现

### 3.2 认知陷阱
- **类型**：
  - 悖论 (Paradox)
  - 循环性 (Circularity)
  - 语义谬误 (Semantic Fallacy)
  - 程序性 (Procedural)
- **实现**：通过加载预定义的陷阱文本文件实现

### 3.3 上下文负载
- **实现**：通过在对话中插入上下文填充内容实现
- **配置**：支持静态和动态上下文长度配置

## 4. 角色扮演

AgentPsy 支持为模型分配不同角色进行测评：

### 4.1 角色文件
- **存储位置**：`llm_assessment/roles/`
- **命名规则**：`{角色名}.txt` 或 `{角色名}_en.txt`（英文版本）
- **内容**：角色的详细描述和行为规范

### 4.2 角色与MBTI类型映射
- 系统内置了角色与MBTI类型的映射关系，用于结果分析

## 5. 测评执行与结果分析

### 5.1 测评执行
- **主脚本**：`llm_assessment/run_assessment_unified.py`
- **参数配置**：支持命令行参数配置模型、测试文件、角色、压力因子等

### 5.2 结果保存
- **结果目录**：`llm_assessment/results/`
- **日志目录**：`llm_assessment/logs/assessments/`
- **文件命名**：包含模型、测试、角色、压力因子等信息

### 5.3 结果分析
- **分析脚本**：`llm_assessment/analyze_big5_results.py`等
- **报告生成**：支持Markdown和JSON格式的分析报告
- **分析内容**：包括维度得分、MBTI类型映射、个性特征分析等

## 6. 批量处理

AgentPsy 支持批量测评，通过配置文件定义测评任务：

### 6.1 配置文件
- **文件**：`llm_assessment/batch_config.json`
- **内容**：定义模型、角色、干扰级别、测评套件等

### 6.2 执行脚本
- **脚本**：`llm_assessment/run_batch_suite.py`
- **功能**：根据配置文件批量执行测评任务

## 7. 交互式工具

AgentPsy 提供了多种交互式工具，简化用户操作：

### 7.1 交互式分析工具
- **脚本**：`interactive_analysis.py`
- **功能**：交互式选择结果文件和评估器进行分析

### 7.2 交互式配置生成器
- **脚本**：`llm_assessment/interactive_config_generator.py`
- **功能**：交互式生成批量测评配置文件